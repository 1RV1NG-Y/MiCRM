<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi CRM</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Login -->
  <div id="login">
    <div id="login-box">
      <h1>Acceso CRM</h1>
      <form id="form-login">
        <div class="campo">
          <label for="usuario">Usuario</label>
          <input id="usuario" required value="admin">
        </div>
        <div class="campo">
          <label for="clave">Contraseña</label>
          <input id="clave" type="password" required value="password">
        </div>
        <button class="btn" type="submit">Entrar</button>
        <p id="login-error"></p>
      </form>
    </div>
  </div>

  <!-- App principal -->
  <div id="app">
    <header>
      <h2>Mi CRM</h2>
      <button id="salir" class="add" style="background:#dc3545">Cerrar sesión</button>
    </header>
    <nav>
      <ul>
        <li><a href="#" class="link-nav activo" data-vista="dashboard">Dashboard</a></li>
        <li><a href="#" class="link-nav" data-vista="contactos">Contactos</a></li>
        <li><a href="#" class="link-nav" data-vista="calendario">Calendario</a></li>
      </ul>
    </nav>
    <main>
      <!-- DASHBOARD -->
      <section id="dashboard" class="seccion activa">
        <div class="encabezado"><h2>Dashboard</h2></div>
        <div class="tarjetas">
          <div class="tarjeta"><h3 id="metrica-meta">0</h3><p>Meta ($)</p></div>
          <div class="tarjeta"><h3 id="metrica-ventas">0</h3><p>Ventas</p></div>
          <div class="tarjeta"><h3 id="metrica-oportunidades">0</h3><p>Oportunidades</p></div>
          <div class="tarjeta"><h3 id="metrica-prospectos">0</h3><p>Prospectos</p></div>
        </div>
        <h3>Pendientes</h3>
        <ul id="lista-pendientes" style="margin-bottom:24px"></ul>
        <h3>Prospectos nuevos</h3>
        <ul id="lista-prospectos"></ul>
      </section>

      <!-- CONTACTOS -->
      <section id="contactos" class="seccion">
        <div class="encabezado">
          <h2>Contactos</h2>
          <button id="nuevo-contacto" class="add">Agregar</button>
        </div>
        <div class="tabla-contenedor">
          <table>
            <thead>
              <tr><th>Nombre</th><th>Tipo</th><th>Email</th><th>Teléfono</th><th>Acciones</th></tr>
            </thead>
            <tbody id="tabla-contactos"></tbody>
          </table>
        </div>
      </section>

      <!-- DETALLE CONTACTO -->
      <section id="detalle" class="seccion">
        <div class="encabezado">
          <h2 id="nombre-detalle">Seguimiento:</h2>
          <button id="volver" class="volver">Volver</button>
        </div>
        <div class="seguimiento-section" style="margin-bottom:24px;">
          <h3>Información del Contacto</h3>
          <div id="info-contacto"></div>
        </div>
        <div class="tarjeta" style="margin-bottom:24px">
          <h3>Tareas pendientes</h3>
          <button id="agregar-tarea" class="add" style="margin:12px 0">Añadir tarea</button>
          <div class="tabla-contenedor">
            <table>
              <thead>
                <tr><th>Tarea</th><th>Lugar</th><th>Fecha/Hora</th><th>Observaciones</th><th></th></tr>
              </thead>
              <tbody id="tabla-tareas-pendientes"></tbody>
            </table>
          </div>
        </div>
        <div class="seguimiento-section">
          <h3>Agregar Seguimiento</h3>
          <textarea id="nota-seguimiento" placeholder="Escribe tu nota de seguimiento aquí..."></textarea>
          <button id="guardar-nota" class="btn" style="margin-top:0;width:auto;padding:8px 16px">Guardar Nota</button>
        </div>
        <div class="seguimiento-section" style="margin-top:24px;">
          <h3>Historial de Seguimiento</h3>
          <div class="tabla-contenedor">
            <table>
              <thead>
                <tr><th>Tarea</th><th>Fecha/Hora</th><th>Duración</th><th>Comentario</th></tr>
              </thead>
              <tbody id="tabla-historial"></tbody>
            </table>
          </div>
        </div>
        <div class="seguimiento-section" style="margin-top:24px;">
          <h3>Historial de tareas</h3>
          <div class="tabla-contenedor">
            <table>
              <thead>
                <tr><th>Tarea</th><th>Lugar</th><th>Fecha/Hora</th><th>Duración</th><th>Comentario</th><th>Archivos</th></tr>
              </thead>
              <tbody id="tabla-historial-tareas"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- CALENDARIO -->
      <section id="calendario" class="seccion">
        <div class="encabezado"><h2>Calendario</h2></div>
        <div class="tarjeta" style="padding:18px">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px">
            <button id="mes-prev" class="volver" style="padding:5px 12px">&lt;</button>
            <h3 id="titulo-mes"></h3>
            <button id="mes-next" class="volver" style="padding:5px 12px">&gt;</button>
          </div>
          <div id="calendario-encabezado" style="display:grid;grid-template-columns:repeat(7,1fr);gap:5px;margin-bottom:5px"></div>
          <div id="calendario-grid"></div>
        </div>
      </section>
    </main>
  </div>

  <!-- MODAL CONTACTO -->
  <div id="modal-contacto" class="modal">
    <div class="modal-contenido">
      <span class="cerrar" data-cerrar="modal-contacto">&times;</span>
      <div class="modal-header"><h3 id="titulo-modal-contacto">Nuevo contacto</h3></div>
      <form id="form-contacto">
        <input type="hidden" id="c-id">
        <div class="campo"><label>Nombre</label><input id="c-nombre" required></div>
        <div class="campo"><label>Tipo</label>
          <select id="c-tipo">
            <option value="prospecto">Prospecto</option>
            <option value="cliente">Cliente</option>
            <option value="baja">Baja</option>
          </select>
        </div>
        <div class="campo"><label>Email</label><input id="c-email" type="email"></div>
        <div class="campo"><label>Teléfono</label><input id="c-telefono"></div>
        <div class="campo"><label>Nombre comercial</label><input id="c-comercial"></div>
        <div class="campo"><label>Razón social</label><input id="c-razon"></div>
        <div class="campo"><label>Ubicación</label><input id="c-ubicacion"></div>
        <div class="campo"><label>Quién recomienda</label><input id="c-refiere"></div>
        <div class="campo"><label>Vendedor/Agente</label><input id="c-agente"></div>
        <div class="campo"><label>Tipo de empresa</label><input id="c-empresa"></div>
        <button class="btn" type="submit">Guardar</button>
      </form>
    </div>
  </div>

  <!-- MODAL TAREA -->
  <div id="modal-tarea" class="modal">
    <div class="modal-contenido">
      <span class="cerrar" data-cerrar="modal-tarea">&times;</span>
      <div class="modal-header"><h3>Nueva tarea</h3></div>
      <form id="form-tarea">
        <input type="hidden" id="t-id">
        <div class="campo"><label>Descripción de la tarea</label><input id="t-desc" required></div>
        <div class="campo"><label>Lugar/Ubicación</label><input id="t-lugar"></div>
        <div class="campo" style="display:flex;gap:8px">
          <div style="flex:1"><label>Fecha</label><input id="t-fecha" type="date" required></div>
          <div style="flex:1"><label>Hora</label><input id="t-hora" type="time" required></div>
        </div>
        <div class="campo"><label>Observaciones</label><textarea id="t-notas"></textarea></div>
        <button class="btn" type="submit">Guardar tarea</button>
      </form>
    </div>
  </div>

  <!-- MODAL DIA CALENDARIO -->
  <div id="modal-dia" class="modal">
    <div class="modal-contenido">
      <span class="cerrar" data-cerrar="modal-dia">&times;</span>
      <div class="modal-header"><h3 id="titulo-dia"></h3></div>
      <ul id="lista-dia"></ul>
    </div>
  </div>

  <!-- MODAL FIN TAREA -->
  <div id="modal-fin-tarea" class="modal">
    <div class="modal-contenido">
      <span class="cerrar" data-cerrar="modal-fin-tarea">&times;</span>
      <div class="modal-header"><h3>Cerrar tarea</h3></div>
      <form id="form-fin-tarea">
        <input type="hidden" id="fin-id">
        <div class="campo"><label>Duración</label><input id="fin-duracion" placeholder="Ej. 5Min"></div>
        <div class="campo"><label>Comentario</label><textarea id="fin-comentario"></textarea></div>
        <div class="campo"><label>Adjuntar archivos</label><input id="fin-archivos" type="file" multiple></div>
        <button class="btn" type="submit">Guardar</button>
      </form>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
